<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diet Tracker - TheDietPlanner.com</title>
    <meta name="description" content="Track your nutrition and manage your diet with Indian foods database, export capabilities, and detailed analytics.">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="container">
                <div class="flex justify-between items-center">
                    <div class="logo">
                        <h1>Diet Tracker</h1>
                        <span class="subtitle">by TheDietPlanner.com</span>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn--outline btn--sm" id="profileBtn" aria-label="Open profile settings">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                            </svg>
                            Profile
                        </button>
                        <button class="btn btn--outline btn--sm" id="themeToggle" aria-label="Toggle theme">
                            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24" id="themeIcon">
                                <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <div class="container">
                <div class="tab-list" role="tablist">
                    <button class="tab-button active" data-tab="daily" role="tab" aria-selected="true" aria-controls="dailyTab">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                        </svg>
                        Daily
                    </button>
                    <button class="tab-button" data-tab="weekly" role="tab" aria-selected="false" aria-controls="weeklyTab">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/>
                        </svg>
                        Weekly
                    </button>
                    <button class="tab-button" data-tab="analytics" role="tab" aria-selected="false" aria-controls="analyticsTab">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
                        </svg>
                        Analytics
                    </button>
                    <button class="tab-button" data-tab="export" role="tab" aria-selected="false" aria-controls="exportTab">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"/>
                        </svg>
                        Export
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                <!-- Daily Tab -->
                <div id="dailyTab" class="tab-content active">
                    <div class="daily-header">
                        <div class="date-selector">
                            <button class="date-nav-btn" id="prevDay" aria-label="Previous day">‹</button>
                            <input type="date" class="form-control date-input" id="currentDate" aria-label="Select date">
                            <button class="date-nav-btn" id="nextDay" aria-label="Next day">›</button>
                        </div>
                        <button class="btn btn--primary" id="addEntryBtn" aria-label="Add new food entry">
                            <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                            </svg>
                            Add Food
                        </button>
                    </div>

                    <!-- Summary Cards -->
                    <div class="summary-grid">
                        <div class="summary-card">
                            <h3>Calories</h3>
                            <div class="summary-value">
                                <span class="current" id="caloriesCurrent">0</span>
                                <span class="target">/ <span id="caloriesTarget">2000</span></span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="caloriesProgress" style="width: 0%"></div>
                            </div>
                        </div>

                        <div class="summary-card">
                            <h3>Protein</h3>
                            <div class="summary-value">
                                <span class="current" id="proteinCurrent">0</span>g
                                <span class="target">/ <span id="proteinTarget">150</span>g</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="proteinProgress" style="width: 0%"></div>
                            </div>
                        </div>

                        <div class="summary-card">
                            <h3>Carbs</h3>
                            <div class="summary-value">
                                <span class="current" id="carbsCurrent">0</span>g
                                <span class="target">/ <span id="carbsTarget">250</span>g</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="carbsProgress" style="width: 0%"></div>
                            </div>
                        </div>

                        <div class="summary-card">
                            <h3>Fat</h3>
                            <div class="summary-value">
                                <span class="current" id="fatCurrent">0</span>g
                                <span class="target">/ <span id="fatTarget">65</span>g</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="fatProgress" style="width: 0%"></div>
                            </div>
                        </div>

                        <div class="summary-card">
                            <h3>Fiber</h3>
                            <div class="summary-value">
                                <span class="current" id="fiberCurrent">0</span>g
                                <span class="target">/ <span id="fiberTarget">25</span>g</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="fiberProgress" style="width: 0%"></div>
                            </div>
                        </div>

                        <div class="summary-card water-card">
                            <h3>Water</h3>
                            <div class="summary-value">
                                <span class="current" id="waterCurrent">0</span>ml
                                <span class="target">/ <span id="waterTarget">2000</span>ml</span>
                            </div>
                            <div class="water-buttons">
                                <button class="water-btn" data-amount="250">250ml</button>
                                <button class="water-btn" data-amount="500">500ml</button>
                            </div>
                        </div>
                    </div>

                    <!-- Meals -->
                    <div class="meals-container">
                        <section class="meal-section" data-meal="breakfast">
                            <h3 class="meal-title">
                                🌅 Breakfast
                                <span class="meal-calories">0 kcal</span>
                            </h3>
                            <div class="meal-entries"></div>
                        </section>

                        <section class="meal-section" data-meal="mid-morning">
                            <h3 class="meal-title">
                                ☕ Mid-Morning
                                <span class="meal-calories">0 kcal</span>
                            </h3>
                            <div class="meal-entries"></div>
                        </section>

                        <section class="meal-section" data-meal="lunch">
                            <h3 class="meal-title">
                                🍽️ Lunch
                                <span class="meal-calories">0 kcal</span>
                            </h3>
                            <div class="meal-entries"></div>
                        </section>

                        <section class="meal-section" data-meal="snack">
                            <h3 class="meal-title">
                                🍎 Snack
                                <span class="meal-calories">0 kcal</span>
                            </h3>
                            <div class="meal-entries"></div>
                        </section>

                        <section class="meal-section" data-meal="dinner">
                            <h3 class="meal-title">
                                🌙 Dinner
                                <span class="meal-calories">0 kcal</span>
                            </h3>
                            <div class="meal-entries"></div>
                        </section>
                    </div>
                </div>

                <!-- Weekly Tab -->
                <div id="weeklyTab" class="tab-content">
                    <div class="weekly-header">
                        <div class="week-selector">
                            <button class="date-nav-btn" id="prevWeek" aria-label="Previous week">‹</button>
                            <span id="weekRange">Week of Aug 12 - Aug 18, 2025</span>
                            <button class="date-nav-btn" id="nextWeek" aria-label="Next week">›</button>
                        </div>
                    </div>

                    <div class="weekly-grid">
                        <!-- Week cards will be dynamically generated -->
                    </div>
                </div>

                <!-- Analytics Tab -->
                <div id="analyticsTab" class="tab-content">
                    <div class="charts-container">
                        <div class="chart-section">
                            <h3>Calories Over Time (Last 7 Days)</h3>
                            <div class="chart-container">
                                <canvas id="caloriesChart" width="400" height="200"></canvas>
                            </div>
                        </div>

                        <div class="chart-section">
                            <h3>Macro Distribution (Today)</h3>
                            <div class="chart-container">
                                <canvas id="macrosChart" width="400" height="200"></canvas>
                            </div>
                        </div>

                        <div class="chart-section">
                            <h3>Weekly Summary</h3>
                            <div class="chart-container">
                                <canvas id="weeklyChart" width="400" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Export Tab - Simplified -->
                <div id="exportTab" class="tab-content">
                    <div class="export-section">
                        <div class="export-description">
                            <h2>Export & Download</h2>
                            <p>Export your nutrition data for external analysis or backup purposes.</p>
                            <p><strong>All data stays local</strong> - no external servers involved.</p>
                        </div>

                        <div class="export-options">
                            <div class="export-group">
                                <h4>📊 Data Export</h4>
                                <p>Download your food entries and nutrition data in different formats.</p>
                                <div class="export-buttons">
                                    <button class="btn btn--primary export-btn" id="exportCSV">
                                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"/>
                                        </svg>
                                        Download Excel (CSV)
                                    </button>
                                    <button class="btn btn--secondary export-btn" id="exportPDF">
                                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11zm-5.5-6.5L9 17h2l.5-1.5H13L13.5 17h2l-2.5-3.5zm-.25-1.5h.5L13 13h-1.5l.25 1z"/>
                                        </svg>
                                        Download PDF Report
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div id="exportStatus" class="export-status"></div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Add Entry Modal -->
        <div id="addEntryModal" class="modal hidden" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
            <div class="modal-backdrop"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modalTitle">Add Food Entry</h2>
                    <button class="modal-close" aria-label="Close modal">×</button>
                </div>
                <div class="modal-body">
                    <form id="entryForm">
                        <div class="form-description">
                            <p>Track your food intake with detailed nutrition information. Use the preset foods or add custom entries.</p>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="entryDate">Date *</label>
                                <input type="date" class="form-control" id="entryDate" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="entryMealTime">Meal Time *</label>
                                <select class="form-control" id="entryMealTime" required>
                                    <option value="">Select meal time</option>
                                    <option value="breakfast">Breakfast</option>
                                    <option value="mid-morning">Mid-Morning</option>
                                    <option value="lunch">Lunch</option>
                                    <option value="snack">Snack</option>
                                    <option value="dinner">Dinner</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="presetFoods">Choose from Indian Foods Database</label>
                            <select class="form-control preset-select" id="presetFoods">
                                <option value="">Select a preset food...</option>
                            </select>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="entryFood">Food Name *</label>
                                <input type="text" class="form-control" id="entryFood" placeholder="Enter food name or select preset" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="entryServing">Serving Size *</label>
                                <input type="text" class="form-control" id="entryServing" placeholder="e.g., 1 cup, 100g" required>
                            </div>
                        </div>

                        <div class="nutrition-grid">
                            <div class="form-group">
                                <label class="form-label" for="entryCalories">Calories</label>
                                <input type="number" class="form-control" id="entryCalories" min="0" step="0.1" placeholder="0">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="entryProtein">Protein (g)</label>
                                <input type="number" class="form-control" id="entryProtein" min="0" step="0.1" placeholder="0">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="entryCarbs">Carbs (g)</label>
                                <input type="number" class="form-control" id="entryCarbs" min="0" step="0.1" placeholder="0">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="entryFat">Fat (g)</label>
                                <input type="number" class="form-control" id="entryFat" min="0" step="0.1" placeholder="0">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="entryFiber">Fiber (g)</label>
                                <input type="number" class="form-control" id="entryFiber" min="0" step="0.1" placeholder="0">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="entryWater">Water (ml)</label>
                                <input type="number" class="form-control" id="entryWater" min="0" step="1" placeholder="0">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="entryNotes">Notes (Optional)</label>
                            <textarea class="form-control" id="entryNotes" rows="3" placeholder="Additional notes about preparation, ingredients, etc."></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn--outline" id="cancelEntry">Cancel</button>
                    <button type="submit" form="entryForm" class="btn btn--primary" id="saveEntry">Add Entry</button>
                </div>
            </div>
        </div>

        <!-- Profile Modal -->
        <div id="profileModal" class="modal hidden" role="dialog" aria-labelledby="profileModalTitle" aria-modal="true">
            <div class="modal-backdrop"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="profileModalTitle">Profile Settings</h2>
                    <button class="modal-close" aria-label="Close modal">×</button>
                </div>
                <div class="modal-body">
                    <form id="profileForm">
                        <div class="form-description">
                            <p>Set your daily nutrition targets to track your progress towards your health goals.</p>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="targetCalories">Daily Calories Target</label>
                                <input type="number" class="form-control" id="targetCalories" min="500" max="5000" step="50" placeholder="2000">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="targetWater">Daily Water Target (ml)</label>
                                <input type="number" class="form-control" id="targetWater" min="500" max="5000" step="250" placeholder="2000">
                            </div>
                        </div>

                        <div class="nutrition-grid">
                            <div class="form-group">
                                <label class="form-label" for="targetProtein">Protein (g)</label>
                                <input type="number" class="form-control" id="targetProtein" min="10" max="300" step="5" placeholder="150">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="targetCarbs">Carbs (g)</label>
                                <input type="number" class="form-control" id="targetCarbs" min="20" max="500" step="10" placeholder="250">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="targetFat">Fat (g)</label>
                                <input type="number" class="form-control" id="targetFat" min="10" max="200" step="5" placeholder="65">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="targetFiber">Fiber (g)</label>
                                <input type="number" class="form-control" id="targetFiber" min="5" max="100" step="5" placeholder="25">
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn--outline" id="cancelProfile">Cancel</button>
                    <button type="submit" form="profileForm" class="btn btn--primary">Save Profile</button>
                </div>
            </div>
        </div>
    </div>

    <!-- App Script -->
    <script src="app.js"></script>
</body>
</html>